<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog of Faradays&#39; Studio</title>
  
  <subtitle>照见五蕴皆空，度一切苦厄。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://faradays-studio.gitee.io/"/>
  <updated>2022-03-21T12:31:02.677Z</updated>
  <id>https://faradays-studio.gitee.io/</id>
  
  <author>
    <name>David</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用Q-Q图验证数据是否满足正态分布</title>
    <link href="https://faradays-studio.gitee.io/202203211952/"/>
    <id>https://faradays-studio.gitee.io/202203211952/</id>
    <published>2022-03-21T11:52:18.000Z</published>
    <updated>2022-03-21T12:31:02.677Z</updated>
    
    <content type="html"><![CDATA[<p>根据大数定律，正常的采样数据达到一定数量时，就会呈现出正态分布的特性。我们之所以特别关心数据是否满足正态分布，无非是这两方面的需要：需要在特定的区间内涵盖大部分的重要数据，或者在两端进行特别的处理。</p><p>笔者最近在做一个油泵运行时长的评价工作中，就是对油泵每次运行的时长进行统计，如果运行时间太长，那么就认为该油泵运行存在一定的异常，那么应该考虑予以告警。</p><p>那么，我们怎么验证数据是否满足正态分布呢？根据网友的介绍，就是对数据进行处理后绘制 “Q-Q”图；我没有专业背景知识，自己理解就是绘制“数据”与“偏差”的双中位数之间的曲线图，如果呈现为一条直线，那么就表明数据呈现出正态分布的特性。</p><h2 id="整理数据"><a href="#整理数据" class="headerlink" title="整理数据"></a>整理数据</h2><ol><li><p>使用 RANK 函数对 <strong>数值</strong> 进行排名计算，如对 B2 求排名，有 D2=<code>RANK(B2,B:B,1)</code>，对D列双击即可获得D列结果（下同，不再赘述）；</p></li><li><p>对 B2（原始数据）、D2 （排名值） 数据进行计算，求得分位数 ，如 E2=<code>(D2-0.5)/COUNT(B:B,B2)</code>；如下：</p></li></ol><p><img src="/static/img/20220321-%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE.png" alt="求数据的排名以及分位数"></p><ol start="3"><li>对分位数列进行升序处理，依次点击 Excel 中的：<code>数据</code>（选项卡）→ <code>排序</code>，对该数据列进行 <strong>升序</strong> 排序处理，如下：</li></ol><p><img src="/static/img/20220321-%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/%E6%8E%92%E5%BA%8F.png" alt="数据排序"></p><blockquote><p>如果不进行排序就绘制曲线，那么曲线就会变成一条来回曲折的奇怪线条；因此必须按 <strong>分位数</strong> 进行排序。</p></blockquote><ol start="4"><li>对 数据进行Z分数计算，如 C2=<code>NORMSINV(E2)</code>；</li></ol><blockquote><p>Z 分数是标准差的倍数，参考文献[1]可以进一步了解，对应的中文版为 <a href="https://www.shuxuele.com/data/standard-normal-distribution.html。">https://www.shuxuele.com/data/standard-normal-distribution.html。</a></p></blockquote><h2 id="绘制图形"><a href="#绘制图形" class="headerlink" title="绘制图形"></a>绘制图形</h2><ol start="5"><li><p>选中上述的 B列（原始数据）、C列（Z分数），执行 Excel 的 <code>插入</code>（选项卡）→ <code>散点图</code>，即可获得拟合曲线；</p></li><li><p>对曲线进行坐标轴等进行个性化调整，并添加趋势线，最终得到效果图如下：</p></li></ol><p><img src="/static/img/20220321-%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/Q-Q%E5%9B%BE.png" alt="数据排序"></p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1]    Rod Pierce. Normal Distribution [EB/OL]. <a href="https://mathsisfun.com/data/standard-normal-distribution.html">https://mathsisfun.com/data/standard-normal-distribution.html</a>, 2022/03/13.</p><p>[2]    博客园. 在Excel里绘制Q-Q图 [EB/OL]. <a href="https://www.cnblogs.com/jiangleads/articles/12984545.html">https://www.cnblogs.com/jiangleads/articles/12984545.html</a>, 2022/03/14.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;根据大数定律，正常的采样数据达到一定数量时，就会呈现出正态分布的特性。我们之所以特别关心数据是否满足正态分布，无非是这两方面的需要：需要在特定的区间内涵盖大部分的重要数据，或者在两端进行特别的处理。&lt;/p&gt;
&lt;p&gt;笔者最近在做一个油泵运行时长的评价工作中，就是对油泵每次运行
      
    
    </summary>
    
    
      <category term="工作中的魔法" scheme="https://faradays-studio.gitee.io/categories/%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E9%AD%94%E6%B3%95/"/>
    
    
      <category term="正态分布" scheme="https://faradays-studio.gitee.io/tags/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/"/>
    
      <category term="Q-Q图" scheme="https://faradays-studio.gitee.io/tags/Q-Q%E5%9B%BE/"/>
    
      <category term="中位数" scheme="https://faradays-studio.gitee.io/tags/%E4%B8%AD%E4%BD%8D%E6%95%B0/"/>
    
      <category term="Excel" scheme="https://faradays-studio.gitee.io/tags/Excel/"/>
    
      <category term="散点图" scheme="https://faradays-studio.gitee.io/tags/%E6%95%A3%E7%82%B9%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>用华为手机克隆快速实现数据的导入导出</title>
    <link href="https://faradays-studio.gitee.io/202202272118/"/>
    <id>https://faradays-studio.gitee.io/202202272118/</id>
    <published>2022-02-27T13:18:58.000Z</published>
    <updated>2022-03-07T13:27:32.938Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>华为的手机克隆功能非常强大，通过该功能，可以实现两部手机之间包括通信录、通话记录、短信、APP等功能的快速迁移。</p><p>最近10多年中，我用了多种手机操作系统的手机，更换手机的时候，最困难的事情就是各种资料的同步：</p><ol><li>通讯录同步：我用过 QQ同步助手、豌豆荚、SIM卡信息导出+Excel整理、刷机软件等各种工具，QQ同步助手、QQ邮箱同步等功能在一些版本的手机上出现了重大兼容性问题，SIM卡信息导入导出非常费精神，豌豆荚也一般般。综合比较下来，还是华为手机克隆功能最稳定，基本无须再进行更多的干预，特别是华为手机之间的信息同步，比手机自身携带的导入导出 VCard 功能还好用。</li><li>程序配置同步：目前我并不了解程序配置同步的方法；只能盲目地整体拷贝手机整个目录。</li><li>系统配置同步：华为等多家手机系统具备账户同步功能。</li></ol><p>因此，一个“华为手机克隆”功能完成上述诉求，还是挺不错的。</p><p>操作过程如下：</p><h2 id="打开-WIFI"><a href="#打开-WIFI" class="headerlink" title="打开 WIFI"></a>打开 WIFI</h2><ol><li>分别开启 2 台手机的 WiFi 功能和定位功能；</li></ol><h2 id="打开应用"><a href="#打开应用" class="headerlink" title="打开应用"></a>打开应用</h2><ol start="2"><li><p>通过搜索功能，快速找到 <code>手机克隆</code> 应用，对于非华为手机，可能需要人为安装该应用程序；</p> <center><img src="/static/img/20220227-手机克隆/1搜索应用.jpg" width="30%"></center></li></ol><h2 id="选择设备类型"><a href="#选择设备类型" class="headerlink" title="选择设备类型"></a>选择设备类型</h2><ol start="3"><li><p>搜索打开“手机克隆”，根据实际情况选择 <code>这是新设备</code>、<code>这是旧设备</code>，如左图；</p><ul><li><p>对于新设备，根据实际选择手机品牌，并出现一个二维码界面，如右图：</p></li><li><p>对于老设备，选择后进入扫描窗口，用该扫描窗口去扫描新设备的二维码，等待1分钟左右完成系统关联。</p><center><img src="/static/img/20220227-手机克隆/2选择设备.jpg" width="30%">  &emsp;→&emsp;<img src="/static/img/20220227-手机克隆/2.1新设备-（选择手机类型后）.jpg" width="30%"></center></li></ul></li></ol><h2 id="选择数据"><a href="#选择数据" class="headerlink" title="选择数据"></a>选择数据</h2><ol start="4"><li>选择需要同步的数据；</li></ol><h2 id="执行同步"><a href="#执行同步" class="headerlink" title="执行同步"></a>执行同步</h2><ol start="5"><li>等待同步同步完成，如下（同步速度是非常快的，打到了42MB/s，比我的手机专用U盘快多了！）：</li></ol><center><figure>    <img src="/static/img/20220227-手机克隆/3发送数据中.jpg" width="30%">    &emsp;&emsp;<img src="/static/img/20220227-手机克隆/4接收数据中.jpg" width="30%"></figure></center><h2 id="同步后自动导入"><a href="#同步后自动导入" class="headerlink" title="同步后自动导入"></a>同步后自动导入</h2><ol start="6"><li><p>同步完成，新手机会自动执行导入操作（比如通话录音、照片等等）：</p><ul><li><p>旧设备显示完成，如左图</p></li><li><p>新设备文件拷贝完成后，自动进行导入操作，如右图：</p>  <center>      <img src="/static/img/20220227-手机克隆/5发送完成.jpg" width="30%">      &emsp;&emsp;<img src="/static/img/20220227-手机克隆/6迁移完成.jpg" width="30%">  </center></li></ul></li></ol><p>同步完成后，新手机就可以直接使用了，除了微信、QQ、网银等部分账户需要重新登录外，部分应用甚至都不需要重新登录… 克隆至此完成。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol><li><p>点亮～黑夜. <a href="https://blog.csdn.net/weixin_41010198/article/details/86639739">Markdwon中多张图片的并排显示</a> [EB/OL]. <a href="https://blog.csdn.net/weixin_41010198/article/details/86639739">https://blog.csdn.net/weixin_41010198/article/details/86639739</a>, 2022/03/07.</p></li><li><p>jerry谁便看看. <a href="https://www.jianshu.com/p/c37f200c0d9c">markdown技巧-图片并排</a> [EB/OL]. <a href="https://www.jianshu.com/p/c37f200c0d9c">https://www.jianshu.com/p/c37f200c0d9c</a>, 2022/03/07.</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;华为的手机克隆功能非常强大，通过该功能，可以实现两部手机之间包括通信录、通话记录、短信、APP等功能的快速迁移。&lt;/p&gt;
&lt;p&gt;最近10多年
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="华为" scheme="https://faradays-studio.gitee.io/tags/%E5%8D%8E%E4%B8%BA/"/>
    
      <category term="手机" scheme="https://faradays-studio.gitee.io/tags/%E6%89%8B%E6%9C%BA/"/>
    
      <category term="克隆" scheme="https://faradays-studio.gitee.io/tags/%E5%85%8B%E9%9A%86/"/>
    
      <category term="导入" scheme="https://faradays-studio.gitee.io/tags/%E5%AF%BC%E5%85%A5/"/>
    
      <category term="导出" scheme="https://faradays-studio.gitee.io/tags/%E5%AF%BC%E5%87%BA/"/>
    
      <category term="QQ同步助手" scheme="https://faradays-studio.gitee.io/tags/QQ%E5%90%8C%E6%AD%A5%E5%8A%A9%E6%89%8B/"/>
    
  </entry>
  
  <entry>
    <title>用iptables管理防火墙策略</title>
    <link href="https://faradays-studio.gitee.io/202202272114/"/>
    <id>https://faradays-studio.gitee.io/202202272114/</id>
    <published>2022-02-27T13:14:57.000Z</published>
    <updated>2022-02-27T13:17:46.774Z</updated>
    
    <content type="html"><![CDATA[<p>iptables 是 CentOS 等系统中管理防火墙策略的工具。通过防火墙的配置，可以增强系统的安全性。</p><p><code>iptables -I</code> : 新加一条规则链<br><code>iptables -A</code> ：增加一条规则链</p><p>一般地，<code>iptables -I</code> 添加的规则放在现有规则的<strong>最前面</strong>，<code>iptables -A</code> 放在现有规则的<strong>最后面</strong>。</p><table><thead><tr><th>参数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>-F</td><td>清空规则链</td><td>iptables -F</td></tr><tr><td>-L</td><td>查看规则链</td><td>iptables -L</td></tr><tr><td>-A</td><td>追加规则</td><td>iptables -A INPUT</td></tr><tr><td>-D</td><td>删除规则</td><td>iptables -D INPUT 1</td></tr><tr><td>-R</td><td>修改规则</td><td>iptable -R INPUT 1 -s 192.168.120.0 -j  DROP</td></tr><tr><td>-I</td><td>在头部插入规则</td><td>iptables -I INPUT 1 –dport 80 -j  ACCEPT</td></tr><tr><td>-L</td><td>查看规则</td><td>iptables -L INPUT</td></tr><tr><td>-N</td><td>新的规则</td><td>iptables -N allowed</td></tr><tr><td>-V</td><td>查看iptables版本</td><td>iptables -V</td></tr><tr><td>-p</td><td>协议（tcp/udp/icmp）</td><td>iptables -A INPUT -p tcp</td></tr><tr><td>-s</td><td>匹配原地址，加” ! “表示除这个IP外</td><td>iptables -A INPUT -s 192.168.1.1</td></tr><tr><td>-d</td><td>匹配目的地址</td><td>iptables -A INPUT -d 192.168.12.1</td></tr><tr><td>–sport</td><td>匹配源端口流入的数据</td><td>iptables -A INPUT -p tcp –sport 22</td></tr><tr><td>–dport</td><td>匹配目的端口流出的数据</td><td>iptables -A INPUT -p tcp –dport 22</td></tr><tr><td>-i</td><td>匹配入口网卡流入的数据</td><td>iptables -A INPUT -i eth0</td></tr><tr><td>-o</td><td>匹配出口网卡流出的数据</td><td>iptables -A FORWARD -o eth0</td></tr><tr><td>-j</td><td>要进行的处理动作:DROP(丢弃)，REJECT(拒绝)，ACCEPT(接受)，SANT(基于原地址的转换)</td><td>iptable -A INPUT 1 -s 192.168.120.0 -j  DROP</td></tr><tr><td>–to-source</td><td>指定SANT转换后的地址</td><td>iptables -t nat -A POSTROUTING -s  192.168.10.0/24 -j SANT –to-source 172.16.100.1</td></tr><tr><td>-t</td><td>表名(raw、mangle、nat、filter)</td><td>iptables -t nat</td></tr><tr><td>-m</td><td>使用扩展模块来进行数据包的匹配(multiport/tcp/state/addrtype)</td><td>iptables -m multiport</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;iptables 是 CentOS 等系统中管理防火墙策略的工具。通过防火墙的配置，可以增强系统的安全性。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;iptables -I&lt;/code&gt; : 新加一条规则链&lt;br&gt;&lt;code&gt;iptables -A&lt;/code&gt; ：增加一条规则链&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="shell" scheme="https://faradays-studio.gitee.io/tags/shell/"/>
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="CentOS" scheme="https://faradays-studio.gitee.io/tags/CentOS/"/>
    
      <category term="iptables" scheme="https://faradays-studio.gitee.io/tags/iptables/"/>
    
      <category term="防火墙" scheme="https://faradays-studio.gitee.io/tags/%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>chattr 的用法</title>
    <link href="https://faradays-studio.gitee.io/202202202033/"/>
    <id>https://faradays-studio.gitee.io/202202202033/</id>
    <published>2022-02-20T12:33:10.000Z</published>
    <updated>2022-02-20T12:38:45.172Z</updated>
    
    <content type="html"><![CDATA[<p>在网络安全的管理中，需要对一些重要的系统文件进行锁定，比如说 <code>/etc/resolv.conf</code>、<code>/etc/hosts</code>，通过锁定，可以避免文件被误修改或者入侵者滥用。</p><pre><code class="sh">chattr +i  文件名     //锁定文件（无法修改、删除等）chattr -i  文件名      //解锁文件chattr +a  文件       //锁定后文件仅可追加chattr -a  文件名     //解锁文件lsattr 文件名           //查看文件特殊属性</code></pre><p>测试情况如下：</p><ol><li>进行文件属性修改</li></ol><pre><code># chattr +i /etc/resolv.conf## chattr +a /etc/resolv.conf## lsattr /etc/resolv.conf----ia---------- /etc/resolv.conf</code></pre><ol start="2"><li>尝试文件的修改</li></ol><pre><code># rm -rf /etc/resolv.confrm: 无法删除&quot;/etc/resolv.conf&quot;: 不允许的操作# echo xyz &gt; /etc/resolv.conf-bash: resolv.conf: 权限不够</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在网络安全的管理中，需要对一些重要的系统文件进行锁定，比如说 &lt;code&gt;/etc/resolv.conf&lt;/code&gt;、&lt;code&gt;/etc/hosts&lt;/code&gt;，通过锁定，可以避免文件被误修改或者入侵者滥用。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;sh&quot;&gt;ch
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="shell" scheme="https://faradays-studio.gitee.io/tags/shell/"/>
    
      <category term="chattr" scheme="https://faradays-studio.gitee.io/tags/chattr/"/>
    
      <category term="锁定" scheme="https://faradays-studio.gitee.io/tags/%E9%94%81%E5%AE%9A/"/>
    
  </entry>
  
  <entry>
    <title>用 csh 对 Solaris 远程访问 IP 进行限制</title>
    <link href="https://faradays-studio.gitee.io/202202121227/"/>
    <id>https://faradays-studio.gitee.io/202202121227/</id>
    <published>2022-02-12T04:27:47.000Z</published>
    <updated>2022-02-20T12:33:32.740Z</updated>
    
    <content type="html"><![CDATA[<p>最早测试这个的时候，花了一些时间，直接看代码吧</p><h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><pre><code class="sh">#!/usr/bin/csh# 执行  csh /etc/block_ssh.csh## 获取 tty 值set tmn = `who am i | awk &#39;&#123;print $2;&#125;&#39;`# 获取当前 IPset login_ip = ` who -um | awk &#39;&#123;print $8;&#125;&#39; | sed -e &#39;s/(//g; s/)//g&#39; `# 获取当前 PID 值set login_pid = `who -um | awk &#39;&#123;print $7;&#125;&#39;`set login_name = `echo $LOGNAME`if ( &quot;$login_ip&quot; == &quot;&quot; || &quot;$login_ip&quot; == &quot;:0&quot; || &quot;$login_ip&quot; == &quot;:0.0&quot;) then    set type_x = &quot;local&quot;else    set type_x = &quot;remote&quot;endifecho &quot;`date +%Y-%m-%d\ %H:%M:%S`   \t $login_name $login_ip \n&quot;  &gt;&gt; /usr/tmp/remote.log#echo -e &quot;`date +%Y-%m-%d\ %H:%M:%S` \t $login_ip \n&quot; &gt;&gt; /tmp/remote.log # bashecho $type_x#trap 1 2 3 9 15if ( &quot;$type_x&quot; == &quot;local&quot; || &quot;$login_ip&quot; == &quot;10.0.2.2&quot; ) then    echo &quot;Welcome......&quot;    logger -p user.info  &quot;Someone has logined in: $login_ip \!&quot;else    echo &quot;  sys log&quot;    # 需要转义：英文叹号    logger -i -p user.err -t SSH &quot;Remote IP is login: $login_ip \!&quot;    echo &quot;  user log&quot;    logger -ip user.alert &quot;Unauthorized remote IP is login: $login_ip \!&quot;    # 测试表明，上述报警同时在 系统日志和用户日志中存储    # kill remote ssh link    pkill -9 -t $tmnendif</code></pre><h2 id="姊妹篇"><a href="#姊妹篇" class="headerlink" title="姊妹篇"></a>姊妹篇</h2><ul><li><a href="../202108251958">用 bash 对 Solaris 远程访问 IP 进行限制</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最早测试这个的时候，花了一些时间，直接看代码吧&lt;/p&gt;
&lt;h2 id=&quot;示例代码&quot;&gt;&lt;a href=&quot;#示例代码&quot; class=&quot;headerlink&quot; title=&quot;示例代码&quot;&gt;&lt;/a&gt;示例代码&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;sh&quot;&gt;
#!/usr/bin/
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="csh" scheme="https://faradays-studio.gitee.io/tags/csh/"/>
    
      <category term="Solaris" scheme="https://faradays-studio.gitee.io/tags/Solaris/"/>
    
      <category term="IP" scheme="https://faradays-studio.gitee.io/tags/IP/"/>
    
      <category term="远程" scheme="https://faradays-studio.gitee.io/tags/%E8%BF%9C%E7%A8%8B/"/>
    
      <category term="限制" scheme="https://faradays-studio.gitee.io/tags/%E9%99%90%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Django ORM 数据库查询的all、filter、exclude方法</title>
    <link href="https://faradays-studio.gitee.io/202202121135/"/>
    <id>https://faradays-studio.gitee.io/202202121135/</id>
    <published>2022-02-12T03:35:06.000Z</published>
    <updated>2022-02-12T04:44:10.090Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Object Relational Mapping(关系对象映射)</strong>，简称为 ORM；对于 Django 框架，指的是Django通过内部的处理函数，实现了多种数据库统一的访问方法，从而可以非常方便地实现软件系统的开发，无须针对不同的数据库进行 SQL 语句的编写；对于非职业开发人员而言，这是一种非常大的优势。</p><p>在开发中小型网站时，使用 Django 确实能够带来了很多的方便。</p><h2 id="Django-orm-用法概述"><a href="#Django-orm-用法概述" class="headerlink" title="Django orm 用法概述"></a>Django orm 用法概述</h2><p>在 ORM 中，查询是更新、删除的基础，查询到相应的QuerySet对象后，可以执行特定字段的设值或者删除操作，如下：</p><table><thead><tr><th>项目</th><th>示例</th><th>备注</th></tr></thead><tbody><tr><td><strong>查询</strong></td><td>test1 = Test.objects.<strong>get</strong>(id=1)</td><td>数据表名=TEST，字段名= id</td></tr><tr><td><strong>更新</strong></td><td>test1<strong>.name</strong> = ‘Google’ <br> test1<strong>.save()</strong></td><td>name 为`字段名</td></tr><tr><td><strong>删除</strong></td><td>test1.<strong>delete()</strong></td><td></td></tr></tbody></table><h2 id="Django-的-filter、exclude"><a href="#Django-的-filter、exclude" class="headerlink" title="Django 的 filter、exclude"></a>Django 的 <strong>filter</strong>、exclude</h2><p>Django的查询方法有很多，基本公式是 <strong><code>数据库名</code>.object.<code>ORM访问方法</code>(<code>字段名</code>__<code>字段控制参数</code>=<code>查询条件</code>)</strong> 。</p><p>除了 <code>get</code> 方法外，最常见的就是 <code>all</code>、<code>filter</code>、<code>exclude</code> 方法了。这里做了表格化的总结：</p><ol><li><p><strong>all</strong> 方法</p><table><thead><tr><th><strong>公式</strong></th><th><strong>备注</strong></th></tr></thead><tbody><tr><td><code>数据表名</code>.objects.<strong>all</strong>()</td><td>查询所有</td></tr><tr><td><code>数据表名</code>.objects.<strong>all</strong>()[:10]</td><td>切片 （前10条）</td></tr><tr><td><code>数据表名</code>.objects.<strong>all</strong>().reverse()[:2]</td><td>反向切片 （最后两条）</td></tr><tr><td><code>数据表名</code>.objects.<strong>all</strong>().reverse()[0]</td><td>最后一条</td></tr></tbody></table></li><li><p><strong>filter</strong> 方法</p><table><thead><tr><th>公式</th><th>备注</th></tr></thead><tbody><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>=”<code>查询内容</code>“)</td><td></td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>=”<code>查询内容</code>“)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__exact=”<code>查询内容</code>“) <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iexact=”<code>查询内容</code>“)</td><td>精确查询（<u><code>i</code> 开头，表示不区分大小写，下同</u>）</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__contains=”<code>查询内容</code>“)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__icontains=”<code>查询内容</code>“)</td><td>包含文本</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__in=[“<code>查询1</code>“, “<code>查询2</code>“, <code>…</code>, “<code>查询n</code>“ ])</td><td>范围检索（任1）</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__range=(<code>最小值</code>, <code>最大值</code>))</td><td><code>数字区域检索</code>__range=(‘2005-01-01 00:00:00’, ‘2005-03-31  00:00:00’)</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__gt=<code>查询数字</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__gte=<code>查询数字</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__lt=<code>查询数字</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__lte=<code>查询数字</code>)</td><td>数值比较（支持与日期/时间参数串接）</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__date=’<code>YYYY-mm-dd</code>‘)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__year=<code>年份数字</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iso_year=<code>年份数字</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__month=<code>月份数值</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__day=<code>日数值</code>)<br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__week=<code>周数</code>) <br> <code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__week_day=<code>星期几数</code>)  <u><em># 星期日=1</em></u>  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iso_week_day=<code>星期几数</code>) <u><em># 星期一=1</em></u>  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__quarter=<code>季节数</code>) # 新历  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__time=”<code>HH:MM</code>“)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__hour=<code>小时数</code>)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__minute=<code>分钟数</code>) <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__second=<code>秒数</code>)</td><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__date=’2022-01-00’)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__year=2022)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iso_year=2022)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__month=2)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__day=10)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__week=52)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__week_day=1)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iso_week_day=1)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__quarter=2)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__time=datetime.time(14,  30))  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__hour=22)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__minute=59)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__second=59)</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__startswith=”<code>查询内容</code>“)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__istartswith=”<code>查询内容</code>“)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__endswith=”<code>查询内容</code>“)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iendswith=”<code>查询内容</code>“)</td><td>匹配开头/结尾检索</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__regex=”<code>查询内容</code>“)  <br><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__iregex=”<code>查询内容</code>“)</td><td>正则表达式查询</td></tr><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段名</code>__isnull=<code>布尔值</code>)</td><td>数据<code>null</code>检索</td></tr></tbody></table></li><li><p><strong>exclude</strong>方法</p><p><strong>exclude</strong> 的用法和  <strong>filter</strong> 基本相同，此处省略。</p></li></ol><h2 id="Django的链式查询"><a href="#Django的链式查询" class="headerlink" title="Django的链式查询"></a>Django的链式查询</h2><ol><li><p>两种参数形成链式查询</p><table><thead><tr><th>公式</th><th>备注</th></tr></thead><tbody><tr><td><code>数据表名</code>.objects.filter(<code>字段名</code>__<strong>year</strong>__<strong>gte</strong>=<code>年份数字</code>)</td><td>日期时间查询支持串接比较参数</td></tr></tbody></table></li><li><p>两种方法形成链式查询</p><table><thead><tr><th>公式</th><th>备注</th></tr></thead><tbody><tr><td><code>数据表名</code>.objects.<strong>filter</strong>(<code>字段1</code>__contains=”<code>查询1</code>“).<strong>exclude</strong>(<code>字段2</code>=”<code>查询2</code>“)</td><td>链式查询（支持多个 <strong>filter</strong>/<strong>exclude</strong>串接）</td></tr></tbody></table></li></ol><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol><li>涂伟忠.<a href="https://code.ziqiangxuetang.com/django/django-queryset-api.html">Django QuerySet API</a>[EB/OL].<a href="https://code.ziqiangxuetang.com/django">https://code.ziqiangxuetang.com/django</a>, 2022/02/12.</li><li>涂伟忠.<a href="https://code.ziqiangxuetang.com/django/django-queryset-advance.html">Django QuerySet 进阶</a>[EB/OL].<a href="https://code.ziqiangxuetang.com/django">https://code.ziqiangxuetang.com/django</a>, 2022/02/12.</li><li>菜鸟教程.<a href="https://www.runoob.com/django/django-model.html">Django 模型</a>[EB/OL].<a href="https://www.runoob.com/django/django-model.html">https://www.runoob.com/django/django-model.html</a>, 2022/02/12.</li><li>Django Software Foundation.<a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/">QuerySet API reference</a>[EB/OL].<a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/">https://docs.djangoproject.com/en/dev/ref/models/querysets/</a>, 2022/02/12.</li><li>Django Software Foundation.<a href="https://docs.djangoproject.com/en/2.2/ref/models/fields/">Model field reference</a>[EB/OL].<a href="https://docs.djangoproject.com/en/2.2/ref/models/fields/">https://docs.djangoproject.com/en/2.2/ref/models/fields/</a>, 2022/02/12.</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;Object Relational Mapping(关系对象映射)&lt;/strong&gt;，简称为 ORM；对于 Django 框架，指的是Django通过内部的处理函数，实现了多种数据库统一的访问方法，从而可以非常方便地实现软件系统的开发，无须针对不同的数据库进
      
    
    </summary>
    
    
      <category term="编程笔记" scheme="https://faradays-studio.gitee.io/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="查询" scheme="https://faradays-studio.gitee.io/tags/%E6%9F%A5%E8%AF%A2/"/>
    
      <category term="Django" scheme="https://faradays-studio.gitee.io/tags/Django/"/>
    
      <category term="all" scheme="https://faradays-studio.gitee.io/tags/all/"/>
    
      <category term="filter" scheme="https://faradays-studio.gitee.io/tags/filter/"/>
    
      <category term="exclude" scheme="https://faradays-studio.gitee.io/tags/exclude/"/>
    
      <category term="数据库" scheme="https://faradays-studio.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>用词云图探析设备故障的分布与频率等特性</title>
    <link href="https://faradays-studio.gitee.io/202110071856/"/>
    <id>https://faradays-studio.gitee.io/202110071856/</id>
    <published>2021-10-07T10:56:08.000Z</published>
    <updated>2022-02-12T04:44:19.524Z</updated>
    
    <content type="html"><![CDATA[<p>近 2 年多来，在系统精益化治理中，通过对设备故障文本的词频及分布规律缝隙，以及深耕多年的系统认识，做了一些比较复杂的系统改造工作，取得了一些别人没有实现的业绩。</p><p>不过，在业绩展示时，多数人员一看数据就翻过去，看都不看一样，囧！因此，用词云图来展示业绩是非常必要的。这里用自己的案例来做个演示。</p><h2 id="导入函数库"><a href="#导入函数库" class="headerlink" title="导入函数库"></a>导入函数库</h2><pre><code class="sh"># -*- coding: utf-8 -*-import numpy as np              # numpy数据处理库import pandas as pdimport codecsimport re                       # 正则表达式库import jieba                    # 结巴分词import jieba.posseg             # 词性获取import jieba.analyse# 设置时间变量，便于对存储的文件进行版本管理import timeimport datetime</code></pre><h2 id="对相关文本内容进行分词处理"><a href="#对相关文本内容进行分词处理" class="headerlink" title="对相关文本内容进行分词处理"></a>对相关文本内容进行分词处理</h2><p>本案例以某一文件的特定列内容进行分词处理为例；但在实际工作中，则可能是上千个包含5w+的文件，由于一般的办公电脑内存都不超过 4GB ，加载太多文件就需要考虑内存优化等一系列问题了，否则系统崩溃不说，还丢了中间版本的成果。网友说，一般地，pandas一次处理的文件不建议大于 100MB，特别是不建议大于 1GB。因此，内存管理、版本管理、数据清洗等复杂的操作，这里就不展开了。</p><p>这里演示的日志文件为 txt 格式，读取特定列内容进行分词，并连同原始数据一并保存为 csv 格式（方便调试过程中比对分词是否正确等）。</p><pre><code class="sh"># 记录开始时间tx1 = time.time()tx2 = str(int(round(tx1 * 1000)))  # 时间戳字符串# 开启并行分词模式（仅支持非 Windows 系统），参数为并行进程数jieba.enable_parallel(3)# 设定自定义词语组合jieba.load_userdict(&quot;jieba_segmenter_dict.txt&quot;)# 读取停用词数据（包括去除：区域名、常用调节词、无意义的编号/特殊符号等）stopwords = pd.read_csv(&#39;jieba_stopword_dict.txt&#39;, encoding=&#39;utf8&#39;, names=[&#39;stopword&#39;], index_col=False)# 转化停用词列表stop_list = stopwords[&#39;stopword&#39;].tolist()# TXT文件特征：事先已由 ANSI 转换为 UTF-8 格式,分隔符是 \t，默认无标题# 加载TXT文件（header=None, names 表示添加标题、数量与 tab 数量相当；设置index_col=0避免首列被当做索引）；read_table、read_csv 等效f1=pd.read_csv(&#39;./EventTxt/EVENT20200627.txt&#39;, sep=&#39;\t&#39;, encoding=&#39;utf_8_sig&#39;, \                index_col=0, header=None, \                names=[&#39;序号&#39;,&#39;时间&#39;,&#39;路径&#39;,&#39;描述&#39;,&#39;操作信息&#39;,&#39;补充信息&#39;,&#39;主机&#39;,&#39;备注&#39;])# 生成分词f1[&#39;分词&#39;] =  f1[&#39;描述&#39;].apply(lambda x : [i for i in jieba.cut(x) if i not in stop_list])  # 去除停用词# print(stop_list[10])# 保存处理后的文件f1.to_csv(&quot;./t4-EventCsv/t4_&quot; + str(count) + &quot;_&quot; + EVENT20200627 + &quot;.csv&quot;, encoding=&#39;utf_8_sig&#39;)# 显示行列数量rowNum=f1.shape[0] #不包括表头colNum=f1.columns.sizeprint(&quot;\n表&quot; + str(count-1) + &quot;\t&quot; +str(rowNum) + &quot; 行\t&quot; + str(colNum)+ &quot; 列&quot;)# 抽样查看数据情况print(f1[&#39;分词&#39;].loc[20])# 显示耗时时间tx3 = time.time()tm_cost = tx3 - tx1print(&#39;&#123;:.2f&#125;&#39;.format(tm_cost) + &quot; s.&quot;)   # str(round(tm_cost,3))</code></pre><p>上述涉及的分词、停用词字典内容暂时不分享，因为相关论文还没有发表，得等到论文发表了再公开吧。毕竟做词云图并不复杂，复杂的是数据如何清洗、权重识别等等，这绝对是考验基层工作经验的。<br>毫无疑问，那些比我会编程的厂家，为啥做不了我做的技改，最核心一点，就是因为我拥有他们从未拥有过的大量实际生产数据！</p><h2 id="词频分析"><a href="#词频分析" class="headerlink" title="词频分析"></a>词频分析</h2><ol><li>导入相应的函数库</li></ol><pre><code class="sh">from PIL import Image               # 图像处理库       import matplotlib.pyplot as plt     # 图像展示库（这里以plt代表库的全称）from wordcloud import WordCloud     # 词云展示库from imageio import imreadimport collections                  # 词频统计库import ast                          # 解决 pandas 读取的列的内容需要转换为 子列表的问题# 重复调用import timeimport pandas as pd</code></pre><ol start="2"><li>进行词频分析</li></ol><pre><code class="sh">tx4 = time.time()   # 时间戳，计算耗时情况tx4s = str(int(round(tx4 * 1000)))  # 时间戳字符串，文件标记，版本管理用# 读入表格第 8 列(首行为标题)，得到  DataFramefq1 = pd.read_csv(&#39;./t4-EventCsv/t4_1_EVENT20200628.csv&#39;, header=0, usecols=[8])# print(fq1.dtypes)# 将所有的分词合并words = []for content in fq1[&#39;分词&#39;]:    words.extend(ast.literal_eval(content))   # 字符转列表，然后列表追加到新列表末尾# 对汇总后的分词进行词频统计fq2 = pd.DataFrame(words, columns=[&#39;分词汇总&#39;])result = pd.value_counts(fq2[&#39;分词汇总&#39;]) result.head(20)  # 不指明参数显示前 5 行，否则按指定参数显示# 创建词频文件result.to_csv(&quot;./t4-WordCloud/t4_wordcloud_&quot; + tx4s + &quot;_1_input.txt&quot;, header=0)print(&quot;词频分析文件已保存。&quot;)</code></pre><h2 id="词云图绘制"><a href="#词云图绘制" class="headerlink" title="词云图绘制"></a>词云图绘制</h2><ol><li>上传相关的资源文件到代码可以访问的目录</li></ol><p>背景图 China-map.jpg，去国家统计局官网下载的。<br>字体文件 simhei.ttf，在 Windows 系统目录中拷贝出来的。</p><ol start="2"><li>词云图绘制</li></ol><pre><code class="sh"># 背景图bg1=imread(&quot;../resource/China-map.jpg&quot;)# 读取词频文件with open(&quot;./t4-WordCloud/t4_wordcloud_&quot; + tx4s + &quot;_1_input.txt&quot;,&quot;r&quot;) as file:    txt=file.read()# 生成词云wc_pic1=WordCloud(background_color=&quot;white&quot;,font_path=&#39;../resource/simhei.ttf&#39;,width=1800,height=1500,mask=bg1).generate(txt)# 保存词云图到本地wc_pic1.to_file(&#39;./t4-WordCloud/t4_wordcloud_&#39; + tx4s + &#39;_2_output.png&#39;)print(&quot;词云图片文件已保存。&quot;)# 使用plt库显示图片plt.imshow(wc_pic1)plt.axis(&quot;off&quot;)plt.show()# 显示耗时时间tx5 = time.time()tm_cost = tx5 - tx4print(str(round(tm_cost,3)) + &quot; s.&quot;)</code></pre><p>最终效果如下：</p><p><img src="/static/img/20211007-t6_EVENT20200630.jpg" alt="词云图效果演示"></p><blockquote><p>上仅做效果演示用，并非笔者的技改项目的最终成果；但未经许可，请勿使用，谢谢！</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;近 2 年多来，在系统精益化治理中，通过对设备故障文本的词频及分布规律缝隙，以及深耕多年的系统认识，做了一些比较复杂的系统改造工作，取得了一些别人没有实现的业绩。&lt;/p&gt;
&lt;p&gt;不过，在业绩展示时，多数人员一看数据就翻过去，看都不看一样，囧！因此，用词云图来展示业绩是非常必
      
    
    </summary>
    
    
      <category term="工作中的魔法" scheme="https://faradays-studio.gitee.io/categories/%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E9%AD%94%E6%B3%95/"/>
    
    
      <category term="Python" scheme="https://faradays-studio.gitee.io/tags/Python/"/>
    
      <category term="WordCloud" scheme="https://faradays-studio.gitee.io/tags/WordCloud/"/>
    
      <category term="词云图" scheme="https://faradays-studio.gitee.io/tags/%E8%AF%8D%E4%BA%91%E5%9B%BE/"/>
    
      <category term="pandas" scheme="https://faradays-studio.gitee.io/tags/pandas/"/>
    
      <category term="Jieba" scheme="https://faradays-studio.gitee.io/tags/Jieba/"/>
    
      <category term="词频" scheme="https://faradays-studio.gitee.io/tags/%E8%AF%8D%E9%A2%91/"/>
    
      <category term="分词" scheme="https://faradays-studio.gitee.io/tags/%E5%88%86%E8%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>一种软件著作权代码合并的批处理脚本</title>
    <link href="https://faradays-studio.gitee.io/202110011009/"/>
    <id>https://faradays-studio.gitee.io/202110011009/</id>
    <published>2021-10-01T02:09:39.000Z</published>
    <updated>2022-02-12T04:44:25.543Z</updated>
    
    <content type="html"><![CDATA[<p>最近在忙着工作上的事情，很长一段时间没有写过文章了。前几周申请了一项软件著作权，涉及到代码需要合并的事情，要求前1500行 + 后1500行组成鉴定材料。因此我花了一点时间写了一个批处理的脚本，如下：</p><pre><code class="bat">REM 指定需要处理的文件类型set /p file_filter=&quot;输入代码文件扩展名，空格分隔，如 *.aspx *.cs *.js *.css *.master *.config *.asax &quot;IF not defined file_filter set file_filter=*.aspx *.cs hhj.js *.masterREM 指定输出文件SET current_date=%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%    :: 0 点是出现兼容性问题（时的第一位不会补零）    SET current_date=%date:~0,4%%date:~5,2%%date:~8,2%.%time:~3,2%%time:~6,2%set output_file=_codes-%current_date%-%computername%.txtset file_list=_files-%current_date%-%computername%.txtREM 指定代码目录，并切换过去（使用 /d 参数）set /p src_dir=&quot;输入代码根目录，如 I:\VirtualBox\vb_share\WebSites\Sis-1.0 ：&quot;    :: 设定初始值，不能带双引号    IF &quot;%src_dir%&quot;==&quot;&quot; set src_dir=I:\VirtualBox\vb_share\WebSites\Sis-1.0:: 跨驱动器切换路径cd /d &quot;%src_dir%&quot;REM 先清空文件，然后后将代码目录中的所有相关文件导入:: 首个代码文件set /p first_file=&quot;输入首个代码文件的相对路径，不区分大小写（如 Default.aspx ）： &quot;    :: 设定初始值，不能带双引号    IF &quot;%first_file%&quot;==&quot;&quot; set first_file=Default.aspx:: 添加根目录set first_file=%src_dir%\%first_file%    :: 不需要双引号扩住，否则会原样输出双引号；末尾也不能添加空格，否则也原样输出    echo %first_file% &gt; %file_list%    :: 将首个代码文件内容添加到目标文件中    echo.&gt; %output_file%type %first_file%&gt;&gt; %output_file%:: 合并当前路径中的代码for /F %%i in (&#39;dir /b/s/a:-d %file_filter%&#39;) do (    :: 追加代码文本内容（比较可以使用 equ 或 == 符号，i 参数表示不区分大小写）    IF /i &quot;%%i&quot;==&quot;%first_file%&quot; (        :: 首个代码文件（切记，括号中不允许只有一个语句、且不支持使用语句与注释交差，即只能第一行为注释！）        echo.&gt;&gt; %output_file%        echo.&gt;&gt; %output_file%        echo.&gt;&gt; %file_list%    ) ELSE (        :: 写入文件清单        echo %%i&gt;&gt; %file_list%        :: 其他代码文件        echo.&gt;&gt; %output_file%        type %%i &gt;&gt; %output_file%    ))echo finish！REM 打开目标文件夹，以便直接拷贝合成文本start explorer %src_dir%::pause</code></pre><p>上述代码是按 ASP.NET 来选择代码文件的，在实际应用时 file_filter 的具体值应该根据你的代码文件的扩展名来设定。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在忙着工作上的事情，很长一段时间没有写过文章了。前几周申请了一项软件著作权，涉及到代码需要合并的事情，要求前1500行 + 后1500行组成鉴定材料。因此我花了一点时间写了一个批处理的脚本，如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;bat&quot;&gt;REM 指定需要处
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Windows" scheme="https://faradays-studio.gitee.io/tags/Windows/"/>
    
      <category term="批处理" scheme="https://faradays-studio.gitee.io/tags/%E6%89%B9%E5%A4%84%E7%90%86/"/>
    
      <category term="bat" scheme="https://faradays-studio.gitee.io/tags/bat/"/>
    
      <category term="脚本" scheme="https://faradays-studio.gitee.io/tags/%E8%84%9A%E6%9C%AC/"/>
    
      <category term="软著" scheme="https://faradays-studio.gitee.io/tags/%E8%BD%AF%E8%91%97/"/>
    
      <category term="代码" scheme="https://faradays-studio.gitee.io/tags/%E4%BB%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>用 bash 对 Solaris 远程访问 IP 进行限制</title>
    <link href="https://faradays-studio.gitee.io/202108251958/"/>
    <id>https://faradays-studio.gitee.io/202108251958/</id>
    <published>2021-08-25T11:58:25.000Z</published>
    <updated>2022-02-12T04:44:31.648Z</updated>
    
    <content type="html"><![CDATA[<p>本来想在网上找一个可以限制远程 IP 访问的脚本，结果一个都不能用；因此，花了几天一边改脚本，一边看 Oracle 的官网手册，最后测试通过了！</p><h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><pre><code class="sh">#!/usr/bin/bash# 执行  bash /etc/block_ssh.sh## TO-DO## 1.0.1        8/19 21:49## 1.0.0   2021/08/01 22:24:48-2021/08/01 22:37:30#       根据 /etc/block_ssh.csh 改编，相应日志文件为#           tail -f /var/adm/messages#           tail -f  /var/log/alarm_`hostname`.log#           tail -f  /usr/tmp/remote.log# 获取 tty 值tmn=`who am i | awk &#39;&#123;print $2;&#125;&#39;`# 获取当前 IP# who am i| awk &#39;&#123;print $2,$6;&#125;&#39;#login_ip=`finger |grep $tmn | awk &#39;&#123;print $6;&#125;&#39;`login_ip=` who -um | awk &#39;&#123;print $8;&#125;&#39; | sed -e &#39;s/(//g; s/)//g&#39; `# bash 去除前缀 $&#123;login_ip#*(&#125; 和后缀 $&#123;login_ip%*)&#125;echo $login_ip# 获取当前 PID 值login_pid=`who -um | awk &#39;&#123;print $7;&#125;&#39;`login_name=`echo $LOGNAME`if [ &quot;$login_ip&quot; = &quot;&quot; -o &quot;$login_ip&quot; = &quot;:0&quot; -o &quot;$login_ip&quot; = &quot;:0.0&quot; ]; then    type_x=&quot;local&quot;else    type_x=&quot;remote&quot;fi# chmod 622 /usr/tmp/remote.logecho -e &quot;`date +%Y-%m-%d\ %H:%M:%S` \t $login_name \t $login_ip&quot; &gt;&gt; /usr/tmp/remote.logecho $type_xtrap 1 2 3 9 15if [ &quot;$type_x&quot; = &quot;local&quot; -o &quot;$login_ip&quot; = &quot;10.0.2.2&quot; ]; then    echo &quot;   Welcome......&quot;    logger -p user.info  &quot;Someone has logined in: $login_ip \!&quot;else    echo &quot;   Warning&quot;    # 需要转义：英文叹号    logger -i -p user.err -t SSH &quot;Remote IP is login: $login_ip \!&quot;    logger -ip user.alert &quot;Unauthorized remote IP is login: $login_ip \!&quot;    #logger -p user.warning  &#39;Unknown IP is login&#39;    # 测试表明，上述报警同时在 系统日志和用户日志中存储    # kill remote ssh link    pkill -9 -t $tmn    #kill -9 $login_pidfi</code></pre><h2 id="姊妹篇"><a href="#姊妹篇" class="headerlink" title="姊妹篇"></a>姊妹篇</h2><ul><li><a href="../202202121227">用 csh 对 Solaris 远程访问 IP 进行限制</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本来想在网上找一个可以限制远程 IP 访问的脚本，结果一个都不能用；因此，花了几天一边改脚本，一边看 Oracle 的官网手册，最后测试通过了！&lt;/p&gt;
&lt;h2 id=&quot;代码示例&quot;&gt;&lt;a href=&quot;#代码示例&quot; class=&quot;headerlink&quot; title=&quot;代码示例
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="bash" scheme="https://faradays-studio.gitee.io/tags/bash/"/>
    
      <category term="Solaris" scheme="https://faradays-studio.gitee.io/tags/Solaris/"/>
    
      <category term="IP" scheme="https://faradays-studio.gitee.io/tags/IP/"/>
    
      <category term="远程" scheme="https://faradays-studio.gitee.io/tags/%E8%BF%9C%E7%A8%8B/"/>
    
      <category term="限制" scheme="https://faradays-studio.gitee.io/tags/%E9%99%90%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>中国专利信息的查询方法</title>
    <link href="https://faradays-studio.gitee.io/202108082250/"/>
    <id>https://faradays-studio.gitee.io/202108082250/</id>
    <published>2021-08-08T14:50:18.000Z</published>
    <updated>2022-02-12T04:44:37.679Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近，由于工作的需要，委托代理公司开展专利申报工作；可是又很关心专利申报流程执行得怎么样了，因此就学习一下如何查询专利。</p></blockquote><ol><li><p>首先，在 <a href="http://cpquery.cnipa.gov.cn/">http://cpquery.cnipa.gov.cn/</a> 网站上注册一个账户（注册公众查询账户就行；我考虑到以后工作的需要，申请了电子申请账户，它也具有公众查询功能）</p><p> <img src="/static/img/20210827-%E4%B8%93%E5%88%A9/CHIPA-%E4%B8%93%E5%88%A9%E5%AE%A1%E6%9F%A5%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F-%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2.png" alt="专利查询系统的登录界面"></p></li><li><p>登陆系统后，输入相关信息就可以查询专利喽！（当然，系统很奇葩，专利号中的点号需要删除；如 <code>202110465388.2</code> 的查询值为 <code>2021104653882</code> ）</p><p> <img src="/static/img/20210827-%E4%B8%93%E5%88%A9/CHIPA-%E4%B8%93%E5%88%A9%E6%A3%80%E7%B4%A2-1-%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E8%BE%93%E5%85%A5.png" alt="专利查询系统的查询内容输入"></p><p> <img src="/static/img/20210827-%E4%B8%93%E5%88%A9/CHIPA-%E4%B8%93%E5%88%A9%E6%A3%80%E7%B4%A2-2-%E7%94%B3%E8%AF%B7%E5%86%85%E5%AE%B9%E8%AF%A6%E6%83%85.png" alt="专利查询系统的专利详情示意"></p></li></ol><blockquote><ul><li>上述系统也可以申请专利，不过很多单位都是委托第三方去处理，也许流程太复杂了吧。</li></ul></blockquote><blockquote><ul><li>从专利检索的角度来说，使用 <a href="http://www.soopat.com/Home/Index">http://www.soopat.com/Home/Index</a> 来检索更为便利一些，毕竟，很多时候，你不知道你要找到的是什么专利！</li></ul></blockquote><blockquote><p>   <img src="/static/img/20210827-%E4%B8%93%E5%88%A9/soopat-%E4%B8%93%E5%88%A9%E6%A3%80%E7%B4%A2%EF%BC%88%E7%A4%BA%E4%BE%8B%EF%BC%89.png" alt="soopat专利查询系统"></p></blockquote><blockquote><ul><li>悄悄地告诉你，如果需要下载专利，可以从这里下载 <a href="https://www.drugfuture.com/cnpat/cn_patent.asp">https://www.drugfuture.com/cnpat/cn_patent.asp</a> 或者 <a href="https://www.patent9.com/">https://www.patent9.com/</a> 。</li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;最近，由于工作的需要，委托代理公司开展专利申报工作；可是又很关心专利申报流程执行得怎么样了，因此就学习一下如何查询专利。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;首先，在 &lt;a href=&quot;http://cpquery.cnip
      
    
    </summary>
    
    
      <category term="办事指南" scheme="https://faradays-studio.gitee.io/categories/%E5%8A%9E%E4%BA%8B%E6%8C%87%E5%8D%97/"/>
    
    
      <category term="专利" scheme="https://faradays-studio.gitee.io/tags/%E4%B8%93%E5%88%A9/"/>
    
      <category term="查询" scheme="https://faradays-studio.gitee.io/tags/%E6%9F%A5%E8%AF%A2/"/>
    
      <category term="方法" scheme="https://faradays-studio.gitee.io/tags/%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>google-authenticator 双因子验证</title>
    <link href="https://faradays-studio.gitee.io/202107312039/"/>
    <id>https://faradays-studio.gitee.io/202107312039/</id>
    <published>2021-07-31T12:39:26.000Z</published>
    <updated>2021-07-31T14:51:50.330Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>日常工作中，经常有人问系统开启双因子验证没有；奈何人穷志短，从网上看到 google-authenticator 支持免费的双因子验证，只要电脑端安装和配置 google-authenticator，就可以通过手机端安装的 Google 身份验证器提供相应的验证码来校验登录访问行为。</p></blockquote><h3 id="程序安装"><a href="#程序安装" class="headerlink" title="程序安装"></a>程序安装</h3><pre><code class="sh">  yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm  yum list google-auth*  yum -y install google-authenticator  vim /etc/pam.d/sshd      # auth        required    pam_sepermit.so      auth required pam_google_authenticator.so  vim /etc/ssh/sshd_config      ChallengeResponseAuthentication yes      # ChallengeResponseAuthentication no      UsePAM yes      AuthenticationMethods publickey,password publickey,keyboard-interactive</code></pre><h3 id="账户验证码功能的配置"><a href="#账户验证码功能的配置" class="headerlink" title="账户验证码功能的配置"></a>账户验证码功能的配置</h3><ol><li><p>生成 root 账户验证码</p><pre><code class="sh">[root@hhjos6 herc]# google-authenticator</code></pre><blockquote><p>  <a href="https://www.google.com/chart?chs=200x200&amp;chld=M|0&amp;cht=qr&amp;chl=otpauth://totp/root@hhjos6%3Fsecret%3D">https://www.google.com/chart?chs=200x200&amp;chld=M|0&amp;cht=qr&amp;chl=otpauth://totp/root@hhjos6%3Fsecret%3D</a>…<br>  Your new secret key is:<br>  此处省略若干字符<br>  Do you want me to update your “~/.google_authenticator” file (y/n) <strong>y</strong></p><p>  Do you want to disallow multiple uses of the same authentication<br>  token? This restricts you to one login about every 30s, but it increases<br>  your chances to notice or even prevent man-in-the-middle attacks (y/n) <strong>y</strong></p><p>  By default, tokens are good for 30 seconds and in order to compensate for<br>  possible time-skew between the client and the server, we allow an extra<br>  token before and after the current time. If you experience problems with poor<br>  time synchronization, you can increase the window from its default<br>  size of 1:30min to about 4min. Do you want to do so (y/n) <strong>y</strong></p><p>  If the computer that you are logging into isn’t hardened against brute-force<br>  login attempts, you can enable rate-limiting for the authentication module.<br>  By default, this limits attackers to no more than 3 login attempts every 30s.<br>  Do you want to enable rate-limiting (y/n) <strong>y</strong><br>  [root@hhjos6 herc]# </p></blockquote></li><li><p>生成 herc 账户验证码</p><blockquote><p>  hhjos6:/home/herc&gt; <strong>google-authenticator</strong><br>  <a href="https://www.google.com/chart?chs=200x200&amp;chld=M|0&amp;cht=qr&amp;chl=otpauth://totp/herc@hhjos6%3Fsecret%">https://www.google.com/chart?chs=200x200&amp;chld=M|0&amp;cht=qr&amp;chl=otpauth://totp/herc@hhjos6%3Fsecret%</a>…<br>  Your new secret key is:<br>  此处省略若干字符<br>  ​       Do you want me to update your “/home/username/.google_authenticator” file (y/n) <strong>y</strong><br>  ​       (是否重新生成登录配置文件？)</p><p>  ​       Do you want to disallow multiple uses of the same authentication<br>  ​       token? This restricts you to one login about every 30s, but it increases<br>  ​       your chances to notice or even prevent man-in-the-middle attacks (y/n) <strong>y</strong><br>  ​       (是否拒绝多次重复使用相同的令牌？这将限制你每30s仅能登录一次，但会提醒/阻止中间人攻击。)<br>  ​<br>  ​       By default, tokens are good for 30 seconds and in order to compensate for<br>  ​       possible time-skew between the client and the server, we allow an extra<br>  ​       token before and after the current time. If you experience problems with poor<br>  ​       time synchronization, you can increase the window from its default<br>  ​       size of 1:30min to about 4min. Do you want to do so (y/n) <strong>n</strong><br>  ​       (是否将窗口时间由1分30秒增加到约4分钟？这将缓解时间同步问题。)<br>  ​<br>  ​       If the computer that you are logging into is not hardened against brute-force<br>  ​       login attempts, you can enable rate-limiting for the authentication module.<br>  ​       By default, this limits attackers to no more than 3 login attempts every 30s.<br>  ​       Do you want to enable rate-limiting (y/n) <strong>y</strong><br>  ​       (是否启用此模块的登录频率限制，登录者将会被限制为最多在30秒内登录3次。)<br>  ​    hhjos6:/home/herc&gt; </p></blockquote></li><li><p>注意事项</p><ul><li>配置问题排查： <code>tail -40f /var/log/secure</code></li><li>输入android 客户端的验证码（注意控制时间）后，再输入账户密码即可登录。</li></ul></li></ol><h3 id="重启进程生效"><a href="#重启进程生效" class="headerlink" title="重启进程生效"></a>重启进程生效</h3><pre><code class="sh">service sshd restart</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;日常工作中，经常有人问系统开启双因子验证没有；奈何人穷志短，从网上看到 google-authenticator 支持免费的双因子验证，只要电脑端安装和配置 google-authenticator，就可以通过手机端安装的 Google 身份验证器
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="配置" scheme="https://faradays-studio.gitee.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="authenticator" scheme="https://faradays-studio.gitee.io/tags/authenticator/"/>
    
      <category term="google" scheme="https://faradays-studio.gitee.io/tags/google/"/>
    
      <category term="双因子" scheme="https://faradays-studio.gitee.io/tags/%E5%8F%8C%E5%9B%A0%E5%AD%90/"/>
    
      <category term="网络安全" scheme="https://faradays-studio.gitee.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>tmux 的编译安装</title>
    <link href="https://faradays-studio.gitee.io/202106281924/"/>
    <id>https://faradays-studio.gitee.io/202106281924/</id>
    <published>2021-06-28T11:24:26.000Z</published>
    <updated>2021-06-28T11:26:22.086Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>正常情况下，直接使用 <code>yum install tmux</code> 即可完成安装。</p></li><li><p>安装支持环境</p><pre><code class="shell">yum -y install libtermcap-devel ncurses-devel libevent-devel readline-devel# tmux depends on libevent 2.x(系统安装的版本为 1.4.13)git clone https://gitee.com/mirrors/libevent.gitcd libevent./configuremakemake verify   # (optional)make install</code></pre></li><li><p>下载源码</p><pre><code class="shell">cd /home/commongit clone https://gitee.com/mirrors/tmux.git#git clone https://github.com/tmux/tmux.git</code></pre></li><li><p>编译安装</p><pre><code class="sh">cd tmuxsh autogen.sh./configuremakemake install</code></pre></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;正常情况下，直接使用 &lt;code&gt;yum install tmux&lt;/code&gt; 即可完成安装。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装支持环境&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;yum -y install libtermcap-
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="编译" scheme="https://faradays-studio.gitee.io/tags/%E7%BC%96%E8%AF%91/"/>
    
      <category term="tmux" scheme="https://faradays-studio.gitee.io/tags/tmux/"/>
    
  </entry>
  
  <entry>
    <title>aria2 的安装与配置</title>
    <link href="https://faradays-studio.gitee.io/202106132011/"/>
    <id>https://faradays-studio.gitee.io/202106132011/</id>
    <published>2021-06-13T12:11:05.000Z</published>
    <updated>2021-06-13T12:13:11.980Z</updated>
    
    <content type="html"><![CDATA[<ol><li>下载（安装 <a href="https://github.com/aria2/aria2">aria2</a> 程序包（下载器）：aria2 is a lightweight multi-protocol &amp; multi-source, cross platform download utility operated in command-line. It supports HTTP/HTTPS, FTP, BitTorrent and Metalink ）</li></ol><pre><code>cd /usr/local/srcgit clone https://gitee.com/mirrors/aria2.git</code></pre><ol start="2"><li>安装 gettext 依赖包（不成功，暂时不开展）</li></ol><pre><code class="sh">sucd /home/commonwget https://mirrors.aliyun.com/gnu/gettext/gettext-0.18.3.2.tar.gztar -zxvf gettext-0.18.3.2.tar.gzcd gettext-0.18.3.2./configuremake -j4    # could not find libjava.so    # Could not find Java SE Runtime Environment.make installln /usr/local/bin/xgettext /bin/xgettextln /usr/local/bin/msguniq /bin/msguniqln /usr/local/bin/msgmerge /bin/msgmerge</code></pre><ol start="3"><li>编译安装</li></ol><pre><code class="sh">autoreconf -i./configure#./configure ARIA2_STATIC=yesmake</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;下载（安装 &lt;a href=&quot;https://github.com/aria2/aria2&quot;&gt;aria2&lt;/a&gt; 程序包（下载器）：aria2 is a lightweight multi-protocol &amp;amp; multi-source, cross p
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="配置" scheme="https://faradays-studio.gitee.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="aria2" scheme="https://faradays-studio.gitee.io/tags/aria2/"/>
    
  </entry>
  
  <entry>
    <title>fzf 的安装与配置</title>
    <link href="https://faradays-studio.gitee.io/202106072338/"/>
    <id>https://faradays-studio.gitee.io/202106072338/</id>
    <published>2021-06-07T15:38:59.000Z</published>
    <updated>2021-06-07T15:46:59.026Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><ol><li><p>安装 <strong>fzf</strong>  （<a href="https://github.com/junegunn/fzf，输入模糊的关键词来定位文件或文件；**源代码就是安装程序**，因此需要选择好路径）">https://github.com/junegunn/fzf，输入模糊的关键词来定位文件或文件；**源代码就是安装程序**，因此需要选择好路径）</a></p><pre><code class="sh">sucd /usr/localgit clone --depth 1 https://github.com/junegunn/fzf.git./fzf/install</code></pre></li><li><p>关联系统（默认会自动关联，可以添加到个人自定义的<strong>全局设置</strong>文件 <code>vim /etc/profile.d/hhjos6.sh</code> 中）</p><pre><code class="sh"># fzf    if [[ ! &quot;$PATH&quot; == */usr/local/fzf/bin* ]]; then      export PATH=&quot;$&#123;PATH:+$&#123;PATH&#125;:&#125;/usr/local/fzf/bin&quot;    fi    # Auto-completion[[ $- == *i* ]] &amp;&amp; source &quot;/usr/local/fzf/shell/completion.bash&quot; 2&gt; /dev/null    # Key bindingssource &quot;/usr/local/fzf/shell/key-bindings.bash&quot;</code></pre></li></ol><pre><code># fzf 其实底层是调用的 Unix 系统 `find` 命令，也可以使用 fd 或 ag 来代替# export FZF_DEFAULT_COMMAND=&quot;fd --exclude=&#123;.git,.idea,.vscode,.sass-cache,node_modules,build&#125; --type f&quot;export FZF_DEFAULT_COMMAND=&#39;ag --hidden --ignore .git -l -g &quot;&quot;&#39;# 界面展示export FZF_DEFAULT_OPTS=&quot;--height 30% --layout=reverse --preview &#39;(highlight -O ansi &#123;&#125; || cat &#123;&#125;) 2&gt; /dev/null | head -100&#39;&quot;# 触发命令行补全(默认是 **，一般不用修改)# FZF_COMPLETION_TRIGGER```</code></pre><blockquote><p>更多用法见参考文献。</p></blockquote><ol start="3"><li><p>配置安装高亮插件</p><ul><li>yum install highlight</li></ul></li><li><p>配置到 vim</p><pre><code class="sh"># 裸装cp /usr/local/fzf/plugin/fzf.vim /usr/share/vim/vim74/pluginvim /etc/vimrc    set rtp+=/usr/local/fzf/# 基于 vim-plug 插件系统Plug &#39;/usr/local/fzf/bin/fzf&#39;Plug &#39;/usr/local/fzf/plugin/fzf.vim&#39;</code></pre></li></ol><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol><li><p>junegunn.<code>fzf - a command-line fuzzy finder</code>[EB/OL].<a href="https://github.com/junegunn/fzf">https://github.com/junegunn/fzf</a>, 2021/03/03.</p></li><li><p>Ein Verne.<code>每天学习一个命令：fzf 使用笔记</code>[EB/OL].<a href="http://einverne.github.io/post/2019/08/fzf-usage.html">http://einverne.github.io/post/2019/08/fzf-usage.html</a>, 2021/03/03.</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装与配置&quot;&gt;&lt;a href=&quot;#安装与配置&quot; class=&quot;headerlink&quot; title=&quot;安装与配置&quot;&gt;&lt;/a&gt;安装与配置&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;安装 &lt;strong&gt;fzf&lt;/strong&gt;  （&lt;a href=&quot;https://github
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="配置" scheme="https://faradays-studio.gitee.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="fzf" scheme="https://faradays-studio.gitee.io/tags/fzf/"/>
    
  </entry>
  
  <entry>
    <title>ag 的安装与配置</title>
    <link href="https://faradays-studio.gitee.io/202104301929/"/>
    <id>https://faradays-studio.gitee.io/202104301929/</id>
    <published>2021-04-30T11:29:34.000Z</published>
    <updated>2021-04-30T11:31:08.962Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p><strong>ag</strong> （<a href="https://github.com/ggreer/the_silver_searcher）比grep、ack更快的递归搜索文件内容（速度对比：`ag`&gt;`ack`&gt;`grep`）">https://github.com/ggreer/the_silver_searcher）比grep、ack更快的递归搜索文件内容（速度对比：`ag`&gt;`ack`&gt;`grep`）</a></p><pre><code class="sh"># centos 6+（epel）yum install the_silver_searcher</code></pre></li><li><p>安装到 vim</p><ul><li><p>安装</p><pre><code class="sh">cd /usr/share/vim/vim74/plugin#cd ~/.vim/plugingit clone https://github.com/rking/ag.vim ag</code></pre></li><li><p>全局配置 <code>vim /etc/vimrc</code></p><pre><code class="sh">&quot; 自动缩进set autoindent&quot; ag 插件（请注意：默认为全局搜索，因此必须指明文件路径，不过支持正则表达式）set runtimepath^=/usr/share/vim/vim74/plugin/ag.vimlet g:ag_prg=&quot;/usr/bin/ag --vimgrep&quot;let g:ag_working_path_mode=&quot;r&quot;</code></pre></li></ul></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;ag&lt;/strong&gt; （&lt;a href=&quot;https://github.com/ggreer/the_silver_searcher）比grep、ack更快的递归搜索文件内容（速度对比：`ag`&amp;gt;`ack`&amp;gt;`grep`）&quot;&gt;
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="配置" scheme="https://faradays-studio.gitee.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="ag" scheme="https://faradays-studio.gitee.io/tags/ag/"/>
    
  </entry>
  
  <entry>
    <title>zsh 环境的安装与配置</title>
    <link href="https://faradays-studio.gitee.io/202104171931/"/>
    <id>https://faradays-studio.gitee.io/202104171931/</id>
    <published>2021-04-17T11:31:02.000Z</published>
    <updated>2021-04-30T11:24:48.101Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>zsh 在 Linux 系统中是自带的，因此不这里并没有讨论 zsh 自身的安装方法，而是 zsh 插件的安装与配置方法。</p></blockquote><h2 id="zsh-的常用快捷键"><a href="#zsh-的常用快捷键" class="headerlink" title="zsh 的常用快捷键"></a>zsh 的常用快捷键</h2><ol><li><p>虽然网络上都宣称 zsh 和 bash 高度解决，不过我个人的理解，bash 的部分快捷键和 csh 倒是比较接近，而 zsh 并不接近。</p><table><thead><tr><th>项目</th><th>zsh</th><th>bash</th><th>备注</th></tr></thead><tbody><tr><td>光标移动到行首</td><td><code>Ctrl</code> + <code>A</code></td><td><code>Home</code></td><td></td></tr><tr><td>光标移动到行尾</td><td><code>Ctrl</code> + <code>E</code></td><td><code>End</code></td><td></td></tr><tr><td>光标后的字符串变为大写</td><td><code>Alt</code> + <code>U</code></td><td></td><td></td></tr><tr><td>当前字符串大写</td><td><code>Alt</code> + <code>C</code></td><td></td><td></td></tr><tr><td>光标后的字符串变为小写</td><td><code>Alt</code> + <code>L</code></td><td></td><td></td></tr><tr><td>删除光标<strong>后</strong>的<strong>所有</strong>字符</td><td><code>Clt</code> + <code>K</code></td><td></td><td></td></tr><tr><td>删除光标<strong>前</strong>的<strong>所有</strong>字符</td><td><code>Clt</code> + <code>H</code></td><td><code>Clt</code> + <code>U</code></td><td><code>Ctrl</code> + <code>U</code> 对 bash 来说是删除光标前的字符，而 zsh 是整行删除。</td></tr><tr><td>删除光标<strong>前</strong>的<strong>一个单词</strong></td><td><code>Ctrl</code> + <code>W</code></td><td></td><td></td></tr><tr><td>删除光标<strong>后</strong>的<strong>一个单词</strong></td><td><code>Alt</code> + <code>D</code></td><td></td><td></td></tr><tr><td>删除光标<strong>当前</strong>的<strong>一个字符</strong></td><td><code>Ctrl</code> + <code>D</code></td><td></td><td></td></tr></tbody></table></li><li><p><strong><code>CTRL + R</code></strong>: 搜索历史</p></li></ol><h2 id="插件的安装与配置"><a href="#插件的安装与配置" class="headerlink" title="插件的安装与配置"></a>插件的安装与配置</h2><ol><li><p>安装 <a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a> 语法提示插件（当用户输入正确命令时指令会绿色高亮，错误时命令红色高亮）</p><pre><code class="sh">su - herccd ~/.zshgit clone git://github.com/zsh-users/zsh-syntax-highlighting.gitvim .zshrc    source /home/herc/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</code></pre></li><li><p>安装 <strong><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a></strong> 命令历史自动提示插件</p><pre><code class="sh">zshsu - herccd ~/.zshmkdir .zshcd .zshbash --versionzsh --versiongit clone https://github.com/zsh-users/zsh-autosuggestionssource zsh-autosuggestions/zsh-autosuggestions.zsh    #完成该步骤后，即可对历史输入命令进行自动语法提示。    # 如果存在过多参数时，仍然可以使用 tab 强制提示。    # 系统内置的命令，如 tar 不能提示参数，不过 yum 可以提示参数、ls 需要强制 tab 才能提示参数</code></pre></li><li><p>安装 incr 系统目录自动提示插件</p><pre><code class="sh">su - herccd ~/.zshwget https://mimosa-pudica.net/src/incr-0.2.zshsource incr*.zsh    # 当前有效，配置到~/.zshrc则用户一直有效（ 使用时将自动以绿色表示提示词）    # 不过按回车就会输入绿色部分，网友说可以使用空格隔断或 delete 键删除，测试无效；建议使用 Ctrl + K 删除末尾后回车！</code></pre></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;zsh 在 Linux 系统中是自带的，因此不这里并没有讨论 zsh 自身的安装方法，而是 zsh 插件的安装与配置方法。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;zsh-的常用快捷键&quot;&gt;&lt;a href=&quot;#zsh-的常用快捷键&quot; cl
      
    
    </summary>
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/categories/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="配置" scheme="https://faradays-studio.gitee.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="zsh" scheme="https://faradays-studio.gitee.io/tags/zsh/"/>
    
  </entry>
  
  <entry>
    <title>Powerline 插件的安装与配置</title>
    <link href="https://faradays-studio.gitee.io/202104102207/"/>
    <id>https://faradays-studio.gitee.io/202104102207/</id>
    <published>2021-04-10T14:07:19.000Z</published>
    <updated>2021-04-17T11:31:26.493Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Powerline-的安装"><a href="#Powerline-的安装" class="headerlink" title="Powerline 的安装"></a>Powerline 的安装</h2><ol><li><p>安装 <a href="https://github.com/powerline/powerline">Powerline</a></p><blockquote><p>  Powerline is a statusline plugin for vim, and provides statuslines and prompts for several other applications, including zsh, bash, fish, tmux, IPython, Awesome, i3 and Qtile.  </p><p>  进阶版本：<a href="https://github.com/b-ryan/powerline-shell">https://github.com/b-ryan/powerline-shell</a>  A beautiful and useful prompt generator for Bash, ZSH, Fish, and tcsh</p></blockquote><pre><code class="sh">pip3 install wheel powerline-status    #或 pip3 install git+git://github.com/powerline/powerline    # pip3 install git+git://gitee.com/mirrors/Powerline# 确认包路径pip3 show powerline-status    # /usr/local/python3/lib/python3.8/site-packages# 查看支持的终端ls /usr/local/python3/lib/python3.8/site-packages/powerline/bindings/    # awesome  bar  bash  config.py  fish  i3  ipython  lemonbar  pdb  qtile  rc  shell  tcsh  tmux  vim  wm  zsh# 查看本地配置gedit /usr/local/python3/lib/python3.8/site-packages/powerline/config_files/config.json</code></pre></li><li><p>安装配套字体，并修改终端界面的显示字体（才会生效）</p><pre><code class="sh">#git clone https://github.com/powerline/fonts.git --depth=1git clone https://gitee.com/efluent/fonts.git --depth=1# installcd fonts./install.sh    # 在相应的账户下安装，就安装到响应账户的文件夹中    /root/.local/share/fonts    /home/herc/.local/share/fontscp -pr fonts/ /usr/share/fonts/powerlinecd ..rm -rf fonts</code></pre><ul><li><p>以下方法测试未成功，原因不明</p><pre><code class="sh">#安装字体# cd /usr/share/fonts/SourceCodePro# chmod +x *.otfcp -pr SourceCodePro/ /usr/share/fontscd /usr/share/fontswget https://github.com/powerline/powerline/blob/develop/font/PowerlineSymbols.otfchmod +x PowerlineSymbols.otf# 下述方法无效#cd /etc/fonts/conf.d/#wget https://github.com/powerline/powerline/blob/develop/font/10-powerline-symbols.conf#wget https://github.com/justrajdeep/fonts/blob/master/10-powerline-symbols.confmkdir -p ~/.config/fontconfig/conf.dcd ~/.config/fontconfig/conf.dwget https://github.com/powerline/fonts/blob/master/fontconfig/50-enable-terminess-powerline.conf# 在各个用户下执行fc-cache -fv</code></pre></li><li><p>查看字体</p><pre><code class="sh"># 查看中文字体清单fc-list :lang=zh# 终端字体保存在find / -name  consolefontscd /lib/kbd/consolefontssetfont -h</code></pre></li><li><p>centos 6安装中文字体（不含文泉驿）</p><pre><code class="sh">yum install bitmap-fonts bitmap-fonts-cjk</code></pre></li></ul></li></ol><h2 id="Powerline-的配置"><a href="#Powerline-的配置" class="headerlink" title="Powerline 的配置"></a>Powerline 的配置</h2><ol><li><p>确认 Python 已关联到系统的各个 shell</p><pre><code class="sh"> # 添加到 Python 程序到系统中 #ln -s /usr/local/python3/bin/powerline /usr/local/bin #ln -s /usr/local/python3/bin/powerline-config /usr/local/bin #ln -s /usr/local/python3/bin/powerline-daemon /usr/local/bin echo &#39;export PATH=$PATH:/usr/local/python3/bin&#39; &gt;&gt; /etc/profile echo &#39;export PATH=$PATH:/usr/local/python3/bin&#39; &gt;&gt; /etc/zprofile</code></pre></li><li><p>bash开启 powerline（全局），参考 <a href="https://powerline.readthedocs.io/en/latest/usage/shell-prompts.html">https://powerline.readthedocs.io/en/latest/usage/shell-prompts.html</a></p><pre><code class="sh"> cd /usr/local/python3/lib/python3.8/site-packages/powerline gedit /etc/bashrc # 或 gedit /etc/profile.d/powerline.sh     # powerline，hhj-20210220     export PATH=$PATH:/usr/local/python3/bin     if [ -f &quot;`which powerline-daemon`&quot; ]; then       powerline-daemon -q       POWERLINE_BASH_CONTINUATION=1       POWERLINE_BASH_SELECT=1       . /usr/local/python3/lib/python3.8/site-packages/powerline/bindings/bash/powerline.sh     fi  . /etc/profile.d/powerline.sh     # 当前用户生效</code></pre></li><li><p>zsh 配置 powerline（全局）</p><pre><code class="sh"> cd /usr/local/python3/lib/python3.8/site-packages/powerline/bindings/zsh/ cp /etc/profile.d/powerline.sh /etc/profile.d/powerline.zsh gedit /etc/profile.d/powerline.zsh     # hhj-20210220     if [ -f &quot;`which powerline-daemon`&quot; ]; then       powerline-daemon -q       POWERLINE_BASH_CONTINUATION=1       POWERLINE_BASH_SELECT=1       . /usr/local/python3/lib/python3.8/site-packages/powerline/bindings/zsh/powerline.zsh     fi  . /etc/profile.d/powerline.zsh</code></pre></li><li><p>vim（全局配置）</p><pre><code class="sh"> vim /etc/vimrc     &quot; hhj-20210220     set  rtp+=/usr/local/python3/lib/python3.8/site-packages/powerline/bindings/vim/     set laststatus=2     set t_Co=256</code></pre></li><li><p>ipython 配置</p><pre><code class="sh"> gedit ~/.ipython/profile_default/ipython_config.py     from powerline.bindings.ipython.since_5 import PowerlinePrompts     c = get_config()     c.TerminalInteractiveShell.simple_prompt = False     c.TerminalInteractiveShell.prompts_class = PowerlinePrompts</code></pre></li><li><p>tmux 配置</p><pre><code class="sh"> gedit ~/.tmux.conf     source &quot;/usr/local/python3/lib/python3.8/site-packages/powerline/bindings/tmux/powerline.conf&quot;</code></pre></li></ol><ul><li><p>解决不能显示git分支问题（未配置）</p><pre><code class="sh">mkdir -p ~/.config/powerlinecat &lt;&lt;-&#39;EOF&#39; &gt; ~/.config/powerline/config.json&#123;    &quot;ext&quot;: &#123;        &quot;shell&quot;: &#123;            &quot;theme&quot;: &quot;default_leftonly&quot;        &#125;    &#125;&#125;EOFpowerline-daemon --replace</code></pre></li></ul><ul><li><p>csh 配置（<strong>不成功</strong>）</p><pre><code class="sh">gedit /etc/zprofile    export PATH=&quot;$PATH:/usr/local/python3/bin&quot;    . /usr/local/python3/lib/python3.8/site-packages/powerline/bindings/tcsh/powerline.tcsh</code></pre></li></ul><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>不记得了，之前安装的时候查阅了多个文档，改天补上来了！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Powerline-的安装&quot;&gt;&lt;a href=&quot;#Powerline-的安装&quot; class=&quot;headerlink&quot; title=&quot;Powerline 的安装&quot;&gt;&lt;/a&gt;Powerline 的安装&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;安装 &lt;a href=&quot;https
      
    
    </summary>
    
    
    
      <category term="电脑爱好者" scheme="https://faradays-studio.gitee.io/tags/%E7%94%B5%E8%84%91%E7%88%B1%E5%A5%BD%E8%80%85/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6 编译安装 Python 3</title>
    <link href="https://faradays-studio.gitee.io/202103291935/"/>
    <id>https://faradays-studio.gitee.io/202103291935/</id>
    <published>2021-03-29T11:35:26.000Z</published>
    <updated>2021-04-10T14:13:44.441Z</updated>
    
    <content type="html"><![CDATA[<h2 id="依赖包的安装"><a href="#依赖包的安装" class="headerlink" title="依赖包的安装"></a>依赖包的安装</h2><ol><li>编译环境的安装（centos6 默认已具备）</li></ol><pre><code class="sh">yum -y groupinstall &quot;Development tools&quot;或yum -y install gcc gcc-c++ zlib zlib-devel    gcc-4.4.7-23    gcc-c++-4.4.7-23    zlib-devel-1.2.3-29yum install -y openssl-develyum install -y libffi-develyum install gcc gcc-c++ glibc-static</code></pre><ol start="2"><li>编译安装 openssl </li></ol><pre><code class="sh">wget http://www.openssl.org/source/openssl-1.1.1.tar.gztar -zxvf openssl-1.1.1.tar.gzcd openssl-1.1.1whereis openssl    # 系统自带版本为 1.0.1e-fips    # [root@hhjos6 lib]# whereis openssl    # openssl: /usr/bin/openssl /usr/lib64/openssl /usr/include/openssl /usr/local/openssl /usr/share/man/man1/openssl.1ssl.gzmkdir /usr/local/openssl./config --prefix=/usr/local/openssl shared zlibmake &amp;&amp; make installecho -e &quot;\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/openssl/lib&quot; &gt;&gt; /etc/profilesource /etc/profileln -s /usr/local/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1ln -s /usr/local/openssl/lib/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1mv /usr/bin/openssl /usr/bin/openssl-1.0.1ln -s /usr/local/openssl/bin/openssl /usr/bin/opensslopenssl    version    exit    # 下个版本的说明 https://wiki.openssl.org/index.php/OpenSSL_3.0</code></pre><h2 id="程序的下载与编译"><a href="#程序的下载与编译" class="headerlink" title="程序的下载与编译"></a>程序的下载与编译</h2><ol start="3"><li>下载程序</li></ol><pre><code class="sh">mkdir -p /home/common/python3.8  &amp;&amp; cd /home/common/python3.8#测试表明，Python 并没有限制 sqlite 版本；不过关闭 --enable-loadable-sqlite-extensions 或者 --enable-optimizations 均能编译通过（虽然同样的报错还在）。wget https://www.python.org/ftp/python/3.8.7/Python-3.8.7.tgz    官方手册 https://docs.python.org/release/3.8.7    sqlite教程 https://docs.python.org/3.8/library/sqlite3.htmltar -xzvf Python-3.8.7.tgz</code></pre><ol start="4"><li>配套修改组件的编译配置（<a href="https://docs.python.org/3.8/whatsnew/changelog.html#changelog">https://docs.python.org/3.8/whatsnew/changelog.html#changelog</a> 链接中指明了 Windows、MacOS 中集成的 sqlite 版本号，但是 Linux 的 Python 3 并没有继承 sqlite，因此需要如下配置 sqlite 库）</li></ol><pre><code class="sh"># ModuleNotFoundError: No module named &#39;_sqlite3&#39;gedit /home/common/python3.8/Python-3.8.7/setup.py    sqlite_inc_paths        &#39;/usr/local/sqlite/include&#39;,        &#39;/usr/local/sqlite/include/sqlite3&#39;,#undefined symbol: __gcov_indirect_call_profiler# cd /home/common/python3.8/Python-3.8.7 &amp;&amp; ./python -E -S -m sysconfig --generate-posix-vars # 报错信息同上# 网友中有通过设置语言</code></pre><ol start="5"><li>编译</li></ol><pre><code class="sh">whereis pythonmkdir /usr/local/python3cd /home/common/python3.8/Python-3.8.7export CPPFLAGS=&quot; -Wno-error=coverage-mismatch&quot;  # 可选./configure  --prefix=/usr/local/python3 --with-openssl=/usr/local/openssl --enable-shared CFLAGS=-fPIC --enable-profiling --enable-loadable-sqlite-extensions    #LD_RUN_PATH=/usr/local/lib ./configure  --prefix=/usr/local/python3 --with-openssl=/usr/local/openssl --enable-shared CFLAGS=-fPIC --enable-optimizations --enable-profiling --enable-loadable-sqlite-extensions   |grep -v &quot;yes&quot;    LD_RUN_PATH=/usr/local/lib: 可选    --prefix 可把所有资源文件放在指定路径下，卸载软件或移植软件只需要对应的文件夹操作。        不指定的话，可执行文件默认放在/usr/local/bin，库文件默认放在/usr/local/lib，        配置文件默认放在/usr/local/etc，其它的资源文件放在/usr/local/share，比较凌乱        要卸载程序，也可以在原来的make目录下用一次make uninstall，但前提是make文件指定过uninstall，否则卸载要结合安装日志来进行逐一删除    --enable-optimizations 加上后性能有 10% 左右的优化，但会明显增加编译时间；        且 https://bugs.python.org/issue34112 提出 gcc 8.1 以下可能编译不过    --enable-shared CFLAGS=-fPIC  是使用 YCM、pyinstaller、caffe、mysqlclient 等一系列功能的需要(后者确保编译时使用相对路径)    --enable-profiling：let you profile the interpreter with gprof    --enable-loadable-sqlite-extensions：support loadable extensions in _sqlite module    # 查看帮助 ./configure --help 或  ./configure -h    # 在更改 ./configure 编译参数后必须清除生成的文件 make clean &amp;&amp; make distcleanmake -j4     #LD_RUN_PATH=/usr/local/lib make -j4     # 警告：‘/home/common/python3.8/Python-3.8.7/build/temp.linux-x86_64-3.8/home/common/python3.8/Python-3.8.7/Modules/resource.gcda’的版本是‘404R’，需要的版本‘408*’ [默认启用]    cd /home/common/python3.8/Python-3.8.7/build/lib.linux-x86_64-3.8    ls  |grep sqlitemake install &gt; py3-install-`date +%Y%m%d`.log</code></pre><h2 id="关联系统"><a href="#关联系统" class="headerlink" title="关联系统"></a>关联系统</h2><ul><li><p>添加到系统</p><pre><code class="sh"># 设置环境变量，也可以直接将 /usr/local/python3/bin 加入 /etc/profile 文件的环境变量 path 中ln -s /usr/local/python3/bin/python3 /usr/bin/python3    # 考虑到 yum 必须使用 python 2 因此，不能命名为 python，切记！    ln -s /usr/local/python3/bin/python3 /usr/bin/py3ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3ln -s /usr/local/python3/bin/python3-config /usr/bin/python3-configcp /usr/local/python3/lib/libpython3.8.so.1.0 /usr/lib64    #/usr/local/python3/bin/python3.8: error while loading shared libraries: libpython3.8.so.1.0: cannot open shared object file: No such file or directory    cd /usr/local/lib    ln -s libpython3.8.so.1.0 libpython3.8.so    cp /usr/local/python3/lib/libpython3.8.so.1.0 /usr/local/libldconfig -vpython -V    whereis python    whereis python3find / -name _sqlite*.sopython3    import sqlite3    Ctrl+ Dpip3 -V    # pip 21.0 将在 2021 年 1 月释出，将停止支持 Python 2.7（Python 2.x） 系列pip -V    #python 2</code></pre></li><li><p>修改 Python3环境变量</p><pre><code class="sh">vi ~/.bash_profile  将“PATH=$PATH:$HOME/bin”修改为“PATH=$PATH:$HOME/bin:/usr/local/python3/bin”    source ~/.bash_profile    # 关闭报警    export PIP_DISABLE_PIP_VERSION_CHECK=1</code></pre></li><li><p>修复Python2的关联</p><pre><code class="sh">vi /usr/bin/yumvi /usr/bin/yum-config-managervim /usr/libexec/urlgrabber-ext-downvi /usr/libexec/ibus-ui-gtkvi /usr/bin/ibus-setupvi /usr/libexec/ibus-engine-tablevi /usr/bin/gnome-tweak-tool</code></pre></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;依赖包的安装&quot;&gt;&lt;a href=&quot;#依赖包的安装&quot; class=&quot;headerlink&quot; title=&quot;依赖包的安装&quot;&gt;&lt;/a&gt;依赖包的安装&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;编译环境的安装（centos6 默认已具备）&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code cla
      
    
    </summary>
    
    
      <category term="编程笔记" scheme="https://faradays-studio.gitee.io/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="CentOS" scheme="https://faradays-studio.gitee.io/tags/CentOS/"/>
    
      <category term="Python" scheme="https://faradays-studio.gitee.io/tags/Python/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="编译" scheme="https://faradays-studio.gitee.io/tags/%E7%BC%96%E8%AF%91/"/>
    
      <category term="sqlite" scheme="https://faradays-studio.gitee.io/tags/sqlite/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6 编译安装 sqlite 3</title>
    <link href="https://faradays-studio.gitee.io/202103211734/"/>
    <id>https://faradays-studio.gitee.io/202103211734/</id>
    <published>2021-03-21T09:34:41.000Z</published>
    <updated>2021-03-21T09:39:58.790Z</updated>
    
    <content type="html"><![CDATA[<p>由于安装 Python 环境的需要，需要对 Python 进行编译安装。</p><h2 id="安装编译环境"><a href="#安装编译环境" class="headerlink" title="安装编译环境"></a>安装编译环境</h2><p>先安装必要的环境，博主的系统中默认其实已经包含了</p><pre><code class="sh">yum install sqlite-devel</code></pre><h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><pre><code class="sh">cd /home/common/wget https://www.sqlite.org/2020/sqlite-autoconf-3320300.tar.gztar -xvzf sqlite-autoconf-3320300.tar.gzcd sqlite-autoconf-3320300/mkdir -p /usr/local/sqlite./configure --prefix=/usr/local/sqlitemake -j4 &amp;&amp; make install</code></pre><h2 id="关联系统"><a href="#关联系统" class="headerlink" title="关联系统"></a>关联系统</h2><pre><code class="sh">vim /etc/ld.so.conf.d/sqlite3.conf    # 可选    /usr/local/sqlite/libldconfig</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;由于安装 Python 环境的需要，需要对 Python 进行编译安装。&lt;/p&gt;
&lt;h2 id=&quot;安装编译环境&quot;&gt;&lt;a href=&quot;#安装编译环境&quot; class=&quot;headerlink&quot; title=&quot;安装编译环境&quot;&gt;&lt;/a&gt;安装编译环境&lt;/h2&gt;&lt;p&gt;先安装必要的环境，博
      
    
    </summary>
    
    
      <category term="编程笔记" scheme="https://faradays-studio.gitee.io/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="CentOS" scheme="https://faradays-studio.gitee.io/tags/CentOS/"/>
    
      <category term="Python" scheme="https://faradays-studio.gitee.io/tags/Python/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="编译" scheme="https://faradays-studio.gitee.io/tags/%E7%BC%96%E8%AF%91/"/>
    
      <category term="sqlite" scheme="https://faradays-studio.gitee.io/tags/sqlite/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6.10 编译安装 GCC4.8.5</title>
    <link href="https://faradays-studio.gitee.io/202103072130/"/>
    <id>https://faradays-studio.gitee.io/202103072130/</id>
    <published>2021-03-07T13:30:40.000Z</published>
    <updated>2021-03-07T13:59:11.729Z</updated>
    
    <content type="html"><![CDATA[<p>由于安装 python 3 的需要，需要升级 GCC；由于我的操作系统是 CentOS6.10，而且还需要考虑到工作软件系统的兼容，因此 GCC 版本暂时定为 4.8.5。测试表明，如果 Python 需要性能优化选项 <code>--enable-optimizations</code>，需要 GCC 8.2+ 以上的版本。</p><h2 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h2><h3 id="GCC-源码下载"><a href="#GCC-源码下载" class="headerlink" title="GCC 源码下载"></a>GCC 源码下载</h3><pre><code class="sh">cd /home/commonwget https://mirrors.tuna.tsinghua.edu.cn/gnu/gcc/gcc-4.8.5/gcc-4.8.5.tar.gztar xzvf gcc-4.8.5.tar.gz# 源码权限根据实际需要设定，实际上编译完成后这个文件夹用不到，因此可以不操作此步骤chmod 777 -R gcc-4.8.5/</code></pre><h3 id="依赖库源码下载"><a href="#依赖库源码下载" class="headerlink" title="依赖库源码下载"></a>依赖库源码下载</h3><pre><code class="sh"># 进入保存地址cd /home/common/gcc-4.8.5wget https://gmplib.org/download/gmp-6.1.2/gmp-6.1.2.tar.bz2tar xvf gmp-6.1.2.tar.bz2mv gmp-6.1.2 gmpwget https://ftp.gnu.org/gnu/mpfr/mpfr-3.1.6.tar.gztar xzvf mpfr-3.1.6.tar.gzmv mpfr-3.1.6 mpfrwget https://ftp.gnu.org/gnu/mpc/mpc-1.0.3.tar.gztar xzvf mpc-1.0.3.tar.gzmv mpc-1.0.3 mpcwget http://www.bastoul.net/cloog/pages/download/cloog-0.18.4.tar.gztar xzvf cloog-0.18.4.tar.gzmv cloog-0.18.4 cloogwget http://isl.gforge.inria.fr/isl-0.14.tar.gztar xzvf isl-0.14.tar.gzmv isl-0.14 isl</code></pre><h2 id="编译安装-GCC"><a href="#编译安装-GCC" class="headerlink" title="编译安装 GCC"></a>编译安装 GCC</h2><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><pre><code class="sh">#gcc4.4.7版本开始，官方推荐使用单独的目录，而不是在解压gcc源码后的目录中进行编译mkdir /home/common/gcc-buildcd gcc-build../gcc-4.8.5/configure --enable-checking=release --enable-languages=c,c++ --disable-multilib    # --with-pkgversion=version ：指定一个标识你的包的字符串    # --enable-languages=c,c++：可以使用 all，default，ada，c，c++，fortran，go，jit，lto，objc，obj-c++。    # --disable-multilib：禁止生成多个平台的代码    # --enable-bootstrap：冗余的编译检查工作    # --enable-gather-detailed-mem-stats：允许通过 -fmem-report 选项来输出编译其它程序时的实时内存使用情况    # --with-long-double-128：指定long double类型的默认值是128位。    # --enable-threads=posix：C++ 异常能处理多线程代码    # --without-bash-malloc：禁用了 Bash 的内存分配函数(malloc)，Bash 将使用更为稳定的 Glibc 里的 malloc 函数。    # --enable-multibyte：支持使用多字节字符编码的文件    grep &quot;error&quot; config.log# 默认的make不加-j参数效率比较低，加上多线程参数 -j4 和-j8性能差距不大，-j16性能就比较差date +%T &amp;&amp; make -j4 &amp;&amp; date +%T    # make clean：清除上次的make命令所产生的object文件（后缀为“.o”的文件）及可执行文件。    # make distclean：包含make clean，同时也将configure生成的文件全部删除掉。感觉有点像在 gcc-build 中执行 rm -rf 的删减版一样。    lscpu |grep -A 1 &#39;Model name&#39;make install</code></pre><h3 id="关联系统"><a href="#关联系统" class="headerlink" title="关联系统"></a>关联系统</h3><p>如果上述安装过程中指定了 gcc 的安装路径，那么需要关联系统。当然，我上一步并没有指定安装路径，而是直接替代了系统自带的 GCC 4.4.7。</p><pre><code class="sh"># 更新环境echo &#39;/usr/local/gcc-4.8.5/lib64&#39; &gt; /etc/ld.so.conf.d/gcc4.8.5.confldconfig# 在自定义的全局配置文件中添加 PATH 变量vim /etc/profile.d/hhjos6.sh    PATH=/usr/local/gcc-4.8.5/bin:$PATHmv /usr/bin/gcc /usr/bin/gcc-4.4.7mv /usr/bin/g++ /usr/bin/g++-4.4.7mv /usr/bin/c++ /usr/bin/c++-4.4.7ln -s /usr/local/gcc/bin/gcc /usr/bin/gccln -s /usr/local/gcc/bin/c++ /usr/bin/c++ln -s /usr/local/gcc/bin/g++ /usr/bin/g++ln -s /usr/local/gcc/lib64/libstdc++.so.6.0.22 /usr/lib64/libstdc++.so.6</code></pre><h3 id="版本检查"><a href="#版本检查" class="headerlink" title="版本检查"></a>版本检查</h3><pre><code class="sh">gcc -v    gcc -dumpversion    ll /usr/bin/cc    strings /usr/lib64/libstdc++.so.6 | grep GLIBCg++ -v    g++ -dumpversion    c++ -dumpversion</code></pre><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><blockquote><p>如果还要尝试 <code>yum -y install centos-release-scl</code> 安装临时版本的 GCC ，那多数人并不会成功，毕竟 CentOS 6 在官方都是不支持的版本了。博主这次安装 GCC 4.8.5 花了很长时间，毕竟坑太多了，而且已有程序环境的兼容性也必须兼顾。因此虽然参考了以下这些文章，但是操作步骤上却有差异；就是一点点差异，我浪费了很多很多的时间！实际上，我看过的文章就不止这些了，但对我并没有提供任何的帮助。</p></blockquote><ol><li><p>TUNA.<code>清华大学开源软件镜像站（GCC）</code>[EB/OL].<a href="https://mirrors.tuna.tsinghua.edu.cn/gnu/gcc">https://mirrors.tuna.tsinghua.edu.cn/gnu/gcc</a>, 2021/02/20.</p></li><li><p>peterpanzsy.<code>centos 6 升级gcc</code>[EB/OL].<a href="https://www.cnblogs.com/peterpanzsy/archive/2013/04/10/3006838.html">https://www.cnblogs.com/peterpanzsy/archive/2013/04/10/3006838.html</a>, 2021/02/20.</p></li><li><p>创小新.<code>LINUX CENTOS6.8编译安装GCC-6.3.0 升级GCC</code>[EB/OL].<a href="https://chuangxiao.xin/h-nd-87.html">https://chuangxiao.xin/h-nd-87.html</a>, 2021/02/20.</p></li><li><p>ljpwinxp.<code>Centos 6.9 编译安装gcc 4.8.5</code>[EB/OL].<a href="https://blog.51cto.com/191226139/2066137">https://blog.51cto.com/191226139/2066137</a>, 2021/02/20.</p></li><li><p>Free Software Foundation.<code>GCC 4.8 Release Series: Changes, New Features, and Fixes</code>[EB/OL].<a href="https://gcc.gnu.org/gcc-4.8/changes.html">https://gcc.gnu.org/gcc-4.8/changes.html</a>, 2021/02/20.</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;由于安装 python 3 的需要，需要升级 GCC；由于我的操作系统是 CentOS6.10，而且还需要考虑到工作软件系统的兼容，因此 GCC 版本暂时定为 4.8.5。测试表明，如果 Python 需要性能优化选项 &lt;code&gt;--enable-optimization
      
    
    </summary>
    
    
      <category term="编程笔记" scheme="https://faradays-studio.gitee.io/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Linux" scheme="https://faradays-studio.gitee.io/tags/Linux/"/>
    
      <category term="CentOS" scheme="https://faradays-studio.gitee.io/tags/CentOS/"/>
    
      <category term="安装" scheme="https://faradays-studio.gitee.io/tags/%E5%AE%89%E8%A3%85/"/>
    
      <category term="GCC" scheme="https://faradays-studio.gitee.io/tags/GCC/"/>
    
      <category term="编译" scheme="https://faradays-studio.gitee.io/tags/%E7%BC%96%E8%AF%91/"/>
    
  </entry>
  
</feed>
